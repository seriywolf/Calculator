<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet">
    <title>Calculator</title>
    <style>
        h1 {
            margin: 32px;
            text-align: center;
        }

        .calculator {
            margin: auto;
            width: 280px;
            height: 460px;
            border: 1px solid rgb(41, 13, 119);
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            align-items: center;
            background-color: rgb(211, 229, 241);
            border-radius: 8px;
        }

        .display {
            border: 1px solid rgb(50, 60, 190);
            border-radius: 4px;
            width: 235px;
            height: 70px;
            margin-bottom: 16px;
            margin-top: 16px;
            font-size: 32px;
            font-weight: 900;
            padding: 6px;
            background-color: aliceblue;
            overflow-wrap: break-word;
            font-family: 'Roboto', sans-serif;
        }

        .smallLCD {
            text-align: right;
            height: 28px;
            font-size: medium;
        }

        .bigLCD {
            text-align: right;
        }

        .buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 6px;
        }

        .button {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 44px;
            height: 44px;
            border: 1px solid rgb(50, 60, 190);
            margin: 6px;
            color: darkblue;
            border-radius: 4px;
            transition-duration: 0.1s;
            font-size: 32px;
            font-weight: 900;
            font-family: 'Roboto', sans-serif;
        }

        .button.key {
            background-color: rgb(189, 221, 231)
        }

        .button.math,
        .enter {
            background-color: rgb(186, 203, 240)
        }

        .reset {
            background-color: rgb(245, 147, 109)
        }

        .button:hover {
            background-color: rgb(252, 228, 124);
        }

        .button:active {
            background-color: orange;
        }



        .button0 {
            width: 102px;
            height: 44px;
        }

        .sub1 {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            width: 180px;
        }

        .vertical {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .vertical .button {
            width: 44px;
            height: 104px;
        }
    </style>
</head>

<body>
    <h1>Calculator</h1>
    <div class="calculator">
        <div class="display">
            <div class="smallLCD"></div>
            <div class="bigLCD"></div>
        </div>
        <div class="buttons">
            <div class="button reset">C</div>
            <div class="button math" id="/">/</div>
            <div class="button math" id="*">x</div>
            <div class="button math" id="-">-</div>
            <div class="sub1">
                <div class="button key" id="7">7</div>
                <div class="button key" id="8">8</div>
                <div class="button key" id="9">9</div>
                <div class="button key" id="4">4</div>
                <div class="button key" id="5">5</div>
                <div class="button key" id="6">6</div>
                <div class="button key" id="1">1</div>
                <div class="button key" id="2">2</div>
                <div class="button key" id="3">3</div>
                <div class="button key button0" id="0">0</div>
                <div class="button key" id=".">.</div>
            </div>
            <div class="vertical">
                <div class="button math" id="+">+</div>
                <div class="button enter">=</div>
            </div>
        </div>
    </div>


    <script>
        const add = (a, b) => {
            return a + b;
        };

        const subtract = (a, b) => {
            return a - b;
        };

        const multiply = (a, b) => {
            return a * b;
        };

        const divide = (a, b) => {
            return a / b;
        };

        function operate(operator, a, b) {
            return operator(a, b);
        };

        const bigLCD = document.querySelector(".bigLCD");
        bigLCD.textContent = 0;
        const smallLCD = document.querySelector(".smallLCD");


        let operator = "";
        let argument = "";
        let a = 0;
        let b = 0;
        let result;
        let check = false;


        document.querySelectorAll(".button.key").forEach(item => {
            item.addEventListener("click", function (event) {
                const pressedKey = event.target.id;
                if (check) {
                    bigLCD.textContent = "0";
                    argument = "";
                    check = false;
                };
                //First check for double "."
                if (pressedKey === "." && argument.includes(".")) {
                    // Do nothing!!!
                //Then check if pressed "." without digit before
                } else if (bigLCD.textContent === "0" && pressedKey === ".") {
                    bigLCD.textContent = "0" + pressedKey;
                    argument += "0" + pressedKey;
                } else if (bigLCD.textContent === "0") {
                    bigLCD.textContent = pressedKey;
                    argument += pressedKey;
                } else {
                    if (bigLCD.textContent.length < 12) {
                        bigLCD.textContent += pressedKey;
                        argument += pressedKey;
                    };
                };
            });
        });

        document.querySelectorAll(".math").forEach(item => {
            item.addEventListener("click", function (event) {
                check = true;
                operator = event.target.id;
                smallLCD.textContent += argument + operator;
                bigLCD.textContent = "0";
                if (a === 0) {
                    a = +argument;
                    argument = "";
                } else {
                    b = +argument;
                    argument = "";
                    operate();
                };
            });
        });


        function operate() {
            if (operator === "") {
                if (argument === "") {
                    result = 0;
                } else {
                    result = argument;
                };
            } else if (operator === "+") {
                result = add(a, b);
            } else if (operator === "-") {
                result = subtract(a, b);
            } else if (operator === "*") {
                result = multiply(a, b);
            } else if (operator === "/") {
                result = divide(a, b);
            };
            a = result;
            //Limit to number of  result digits to screen to 12
            let m = Math.pow(10, 12);
            result = Math.round(result * m) / m;
            bigLCD.textContent = result;
        };

        const enter = document.querySelector(".button.enter");
        enter.onclick = function () {
            b = +argument;
            if (operator === "/" && b === 0) {
                console.log(b);
                bigLCD.textContent = "ERROR";
            } else {
                smallLCD.textContent = "";
                operate();
            };
        };


        const resetButton = document.querySelector(".button.reset");
        resetButton.onclick = function () {
            bigLCD.textContent = 0;
            smallLCD.textContent = "";
            a = 0;
            b = 0;
            operator = "";
            argument = "";
            result = 0;
            check = false;
        };
    </script>
</body>

</html>